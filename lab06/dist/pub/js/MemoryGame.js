function MemoryGame(){var e,t,n,a=$("#GameBoard"),i=$("#Timer"),d=[],r=[],o=this,l=[];this.scoreBoardUpdated=null,$.getJSON("/json/CardDef.json",function(e){d=e}),this.NewGame=function(n){if(r=[],e=0,n>10)return alert("invalid number of matches"),0;clearInterval(t),t=setInterval(function(){i.html(++e)},1e3),a.html("");for(o=0;o<n;o++)r.push(d[o]),r.push(d[o]);shuffle(r);for(var o=0;o<r.length;o++)a.append('<li><div class="card" data-url="'+r[o].url+'" data-name="'+r[o].name+'"></div></li>');a.find(".card").click(s)};var s=function(){2!=a.find(".flipped").length&&($(this).hasClass("flipped")||$(this).slideToggle("fast",function(){$(this).addClass("flipped"),$(this).css("background-image","url("+$(this).data("url")+")"),$(this).slideToggle("fast",function(){2==a.find(".flipped").length&&(a.find(".flipped").eq(0).data("name")===a.find(".flipped").eq(1).data("name")?a.find(".flipped").addClass("matched").removeClass("flipped"):n=setTimeout(function(){a.find(".flipped").removeClass("flipped").css("background-image","url(/img/Animemory.png)")},1e3)),a.find(".matched").length==r.length&&(n=setTimeout(function(){var n=e;clearInterval(t),alert("You Win!!!!!");var a=prompt("Enter Your Name: ","Player");l.push({name:a,time:n}),l.sort(function(e,t){return e.time>t.time}),"function"==typeof o.ScoreboardUpdated&&o.ScoreboardUpdated(l)},500))})}))}}$(document).ready(function(){var e=new MemoryGame;e.ScoreboardUpdated=function(e){$("#scoreboard").html(""),e.forEach(function(e){$("#scoreboard").append("<tr><td>"+e.name+"</td><td>"+e.time+"</td></tr>")},this)},document.getElementById("ngButton").onclick=function(){e.NewGame(2)}});nterval(gameTimer); alert('You Win!!!!!'); var Player = prompt('Enter Your Name: ','Player'); highScore.push({name: Player,time: winTime}); highScore.sort(function(a, b){ return a.time > b.time;}); if (typeof gameInstance.ScoreboardUpdated === "function") { gameInstance.ScoreboardUpdated(highScore); } }, 500); } }); }); } } }; $(document).ready(function(){ var memGame = new MemoryGame(); memGame.ScoreboardUpdated = function (data) { $('#scoreboard').html(''); data.forEach(function (item) { $('#scoreboard').append("<tr><td>" + item.name + "</td><td>" + item.time + "</td></tr>"); }, this); }; document.getElementById('ngButton').onclick = function(){ memGame.NewGame(2); }; });